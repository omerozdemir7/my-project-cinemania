import{initializeApp as X}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import{getAuth as Q,onAuthStateChanged as Z,sendPasswordResetEmail as ee,signInWithEmailAndPassword as te,createUserWithEmailAndPassword as ne,signOut as oe}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";import{getFirestore as ae,doc as P,getDoc as se,updateDoc as re,arrayRemove as ie,setDoc as ce,arrayUnion as le}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}})();const de="modulepreload",ue=function(e){return"/my-project-cinemania/"+e},R={},me=function(t,o,n){let a=Promise.resolve();if(o&&o.length>0){let m=function(r){return Promise.all(r.map(u=>Promise.resolve(u).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),i=c?.nonce||c?.getAttribute("nonce");a=m(o.map(r=>{if(r=ue(r),r in R)return;R[r]=!0;const u=r.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${l}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":de,u||(d.as="script"),d.crossOrigin="",d.href=r,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((v,k)=>{d.addEventListener("load",v),d.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${r}`)))})}))}function s(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return a.then(c=>{for(const i of c||[])i.status==="rejected"&&s(i.reason);return t().catch(s)})},pe={apiKey:"AIzaSyBmuibsjXBem9CN6pB-0nye7NryFJSya2g",authDomain:"filmorex.firebaseapp.com",projectId:"filmorex",storageBucket:"filmorex.firebasestorage.app",messagingSenderId:"962389606250",appId:"1:962389606250:web:4ba4c4fd8d70b077e56f13",measurementId:"G-XYT7Y5H7G9"},W=X(pe),y=Q(W),U=ae(W),x=document.getElementById("btn-login"),O=document.getElementById("btn-logout"),L=document.getElementById("auth-modal-backdrop"),D=document.getElementById("auth-close-btn"),q=document.getElementById("auth-form"),fe=document.getElementById("auth-email"),ge=document.getElementById("auth-password"),j=document.getElementById("auth-title"),B=document.getElementById("auth-submit-btn"),$=document.getElementById("auth-switch-btn"),A=document.getElementById("user-account-container"),N=document.getElementById("dropdown-email"),F=document.getElementById("btn-change-password");let M=!0;Z(y,e=>{e?(x&&x.classList.add("is-hidden"),A&&A.classList.remove("is-hidden"),N&&(N.textContent=e.email)):(x&&x.classList.remove("is-hidden"),A&&A.classList.add("is-hidden"),N&&(N.textContent=""))});F&&(F.onclick=async e=>{e.preventDefault();const t=y.currentUser;if(t&&t.email&&confirm(`${t.email} adresine şifre sıfırlama bağlantısı gönderilsin mi?`))try{await ee(y,t.email),alert("E-posta gönderildi! Lütfen gelen kutunuzu kontrol edin.")}catch(n){alert("Hata: "+n.message)}});x&&(x.onclick=()=>L.classList.remove("is-hidden"));D&&(D.onclick=()=>L.classList.add("is-hidden"));L&&(L.onclick=e=>{e.target===L&&L.classList.add("is-hidden")});$&&($.onclick=()=>{M=!M,M?(j.textContent="Login",B.textContent="Sign In",$.parentElement.innerHTML=`Don't have an account? <span id="auth-switch-btn" style="color:orange;cursor:pointer">Register here</span>`):(j.textContent="Register",B.textContent="Sign Up",$.parentElement.innerHTML='Already have an account? <span id="auth-switch-btn" style="color:orange;cursor:pointer">Login here</span>'),document.getElementById("auth-switch-btn").onclick=$.onclick});q&&(q.onsubmit=async e=>{e.preventDefault();const t=fe.value,o=ge.value;B.disabled=!0,B.textContent="Please wait...";try{M?await te(y,t,o):await ne(y,t,o),L.classList.add("is-hidden"),q.reset()}catch(n){alert("Hata: "+n.message)}finally{B.disabled=!1,B.textContent=M?"Sign In":"Sign Up"}});O&&(O.onclick=async e=>{e.preventDefault(),await oe(y),window.location.reload()});async function H(){const e=y.currentUser;if(e){const t=P(U,"users",e.uid);try{const o=await se(t);if(o.exists())return o.data().library||[]}catch(o){console.error(o)}return[]}else return JSON.parse(localStorage.getItem("myLibrary"))||[]}async function ye(e){const t=y.currentUser,o=Number(e);if(t){const n=P(U,"users",t.uid);await ce(n,{library:le(o)},{merge:!0})}else{const n=JSON.parse(localStorage.getItem("myLibrary"))||[];n.includes(o)||(n.push(o),localStorage.setItem("myLibrary",JSON.stringify(n)))}}async function he(e){const t=y.currentUser,o=Number(e);if(t){const n=P(U,"users",t.uid);await re(n,{library:ie(o)})}else{let n=JSON.parse(localStorage.getItem("myLibrary"))||[];n=n.filter(a=>a!==o),localStorage.setItem("myLibrary",JSON.stringify(n))}}const ve="362ee522f1af2dedac989b8df9cfb4eb",be="https://api.themoviedb.org/3",we="https://image.tmdb.org/t/p/w500",Le="https://image.tmdb.org/t/p/original";async function E(e,t={},o="en-US"){const n=new URL(`${be}${e}`);n.searchParams.append("api_key",ve),o&&n.searchParams.append("language",o);for(const a in t)t[a]&&n.searchParams.append(a,t[a]);try{const a=await fetch(n);if(!a.ok)throw new Error(`API Error: ${a.status}`);return await a.json()}catch(a){return console.error("API Request Failed:",a),null}}async function Ae(e=1){return await E("/movie/popular",{page:e})}async function Ne(e="week",t=1){return await E(`/trending/movie/${e}`,{page:t})}async function qe(e=1){return await E("/movie/upcoming",{page:e,region:"US"})}async function Te(e,t=1,o=""){return await E("/search/movie",{query:e,page:t,primary_release_year:o})}async function G(e){return await E(`/movie/${e}`)}async function Ee(e){return await E(`/movie/${e}/videos`,{},null)}function J(e){return e?`${we}${e}`:"https://via.placeholder.com/500x750?text=No+Poster"}function V(e){return e?`${Le}${e}`:"https://via.placeholder.com/1920x1080?text=No+Image"}async function ke(e){return await E(`/movie/${e}/watch/providers`)}function Ie(){const e=document.querySelector("#movie-modal-backdrop");if(!e)return{openModal:()=>{},closeModal:()=>{}};const t=e.querySelector("#modal-close-btn"),o=e.querySelector("#modal-poster"),n=e.querySelector("#modal-title"),a=e.querySelector("#modal-vote-avg"),s=e.querySelector("#modal-vote-count"),c=e.querySelector("#modal-popularity"),i=e.querySelector("#modal-genre"),m=e.querySelector("#modal-description"),r=e.querySelector("#modal-add-btn"),u=e.querySelector("#modal-providers-container"),l=e.querySelector("#modal-providers-list"),d=e.querySelector("#modal-watch-link"),v=e.querySelector("#modal-google-btn");async function k(g){const f=await G(g);if(!f)return;v&&(v.onclick=()=>{const p=encodeURIComponent(`${f.title} izle`);window.open(`https://www.google.com/search?q=${p}`,"_blank")});const _=await ke(g);if(o&&(o.src=J(f.poster_path)),n&&(n.textContent=f.title.toUpperCase()),a&&(a.textContent=f.vote_average.toFixed(1)),s&&(s.textContent=f.vote_count),c&&(c.textContent=f.popularity.toFixed(1)),i&&(i.textContent=f.genres.map(p=>p.name).join(", ")||"N/A"),m&&(m.textContent=f.overview||"No description available."),u&&l){l.innerHTML="",u.classList.add("is-hidden");const p=_?.results?.TR;p&&p.flatrate&&p.flatrate.length>0&&(u.classList.remove("is-hidden"),d&&(d.href=p.link),p.flatrate.slice(0,5).forEach(I=>{const b=document.createElement("img");b.src=`https://image.tmdb.org/t/p/original${I.logo_path}`,b.alt=I.provider_name,b.title=`Watch on ${I.provider_name}`,b.classList.add("provider-logo"),b.onclick=()=>{const S=encodeURIComponent(f.title),w=I.provider_name.toLowerCase();let h="";w.includes("netflix")?h=`https://www.netflix.com/search?q=${S}`:w.includes("amazon")||w.includes("prime")?h=`https://www.primevideo.com/search/ref=atv_nb_sr?phrase=${S}`:w.includes("disney")?h=`https://www.disneyplus.com/search?q=${S}`:w.includes("apple")?h=`https://tv.apple.com/search?term=${S}`:w.includes("blutv")?h=`https://www.blutv.com/arama?q=${S}`:w.includes("mubi")?h=`https://mubi.com/tr/search/films?query=${S}`:h=p.link,window.open(h,"_blank")},l.appendChild(b)}))}if(r){const p=Number(f.id);r.dataset.id=p,r.textContent="Checking...",r.disabled=!0,r.classList.remove("btn-remove"),H().then(I=>{I.includes(p)?(r.textContent="Remove from my library",r.classList.add("btn-remove")):(r.textContent="Add to my library",r.classList.remove("btn-remove")),r.disabled=!1})}e.classList.remove("is-hidden"),document.body.classList.add("modal-open")}function C(){e.classList.add("is-hidden"),document.body.classList.remove("modal-open")}return t&&t.addEventListener("click",C),e.addEventListener("click",g=>{g.target===e&&C()}),window.addEventListener("keydown",g=>{g.key==="Escape"&&!e.classList.contains("is-hidden")&&C()}),r&&r.addEventListener("click",async()=>{const g=Number(r.dataset.id);if(!g)return;r.disabled=!0;const f=r.textContent;r.textContent="Processing...";try{(await H()).includes(g)?(await he(g),r.textContent="Add to my library",r.classList.remove("btn-remove")):(await ye(g),r.textContent="Remove from my library",r.classList.add("btn-remove"))}catch(_){console.error("Library Error:",_),r.textContent=f,alert("Bir hata oluştu. Giriş yapmamış olabilir misiniz?")}finally{r.disabled=!1}}),{openModal:k,closeModal:C}}function Se(){const e=document.querySelector(".footer-link"),t=document.getElementById("team-modal-backdrop"),o=document.getElementById("team-modal-close-btn");if(!e||!t)return;function n(c){c.preventDefault(),t.classList.remove("is-hidden"),document.body.classList.add("modal-open"),window.addEventListener("keydown",s)}function a(){t.classList.add("is-hidden"),document.body.classList.remove("modal-open"),window.removeEventListener("keydown",s)}function s(c){c.code==="Escape"&&a()}e.addEventListener("click",n),o&&o.addEventListener("click",a),t.addEventListener("click",c=>{c.target===t&&a()})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-nav"),t=document.querySelector(".logo"),o=document.querySelector(".mobile-menu-btn");let n=null;if(!e||!t)return;const a=()=>window.innerWidth<=768;function s(m){a()&&(m&&m.preventDefault(),n||(n=document.createElement("div"),n.className="mobile-overlay",n.addEventListener("click",c),document.body.appendChild(n)),e.classList.add("is-open"),document.body.classList.add("menu-open"))}function c(){e.classList.remove("is-open"),document.body.classList.remove("menu-open"),n&&(n.removeEventListener("click",c),n.remove(),n=null)}let i=e.querySelector(".mobile-nav-close");i||(i=document.createElement("button"),i.type="button",i.className="mobile-nav-close",i.innerHTML="&times;",e.appendChild(i)),i.addEventListener("click",c),t.addEventListener("click",s),o&&o.addEventListener("click",s),e.querySelectorAll("a.nav-link").forEach(m=>{m.addEventListener("click",c)}),window.addEventListener("resize",()=>{a()||c()})});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle-checkbox"),t=document.body;if(!e)return;localStorage.getItem("theme")==="light"&&(t.classList.add("light-mode"),e.checked=!0),e.addEventListener("change",()=>{e.checked?(t.classList.add("light-mode"),localStorage.setItem("theme","light")):(t.classList.remove("light-mode"),localStorage.setItem("theme","dark"))})});const xe=()=>{if(document.querySelector('script[src*="translate.google.com"]'))return;const e=document.createElement("script");e.type="text/javascript",e.src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit",document.body.appendChild(e)};window.googleTranslateElementInit=function(){new google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"tr,en,fr,de,ku",autoDisplay:!1},"google_translate_element")};function Be(e){const t=`/auto/${e}`;document.cookie=`googtrans=${t}; path=/; domain=${window.location.hostname}`,document.cookie=`googtrans=${t}; path=/;`,window.location.reload()}xe();document.addEventListener("DOMContentLoaded",()=>{const{openModal:e}=Ie();window.openMovieModal=e,Se();const t=window.location.pathname;let o=null;t.includes("catalog.html")?o="catalog.js":t.includes("my-library.html")?o="my-library.js":(t==="/"||t.endsWith("index.html"))&&(o="index.js"),o&&me(()=>import(`./${o}`),[]).catch(a=>console.error(a)),document.querySelectorAll(".nav-link").forEach(a=>{a.classList.remove("active");const s=a.getAttribute("href");((t==="/"||t.includes("index.html"))&&s.includes("index.html")||t.includes("catalog")&&s.includes("catalog")||t.includes("library")&&s.includes("library"))&&a.classList.add("active")})});document.addEventListener("click",e=>{if(e.target.closest("#btn-account")){e.preventDefault(),e.stopPropagation();const i=document.getElementById("account-dropdown");i&&i.classList.toggle("show");return}const o=e.target.closest("#btn-languages");if(o){e.preventDefault(),e.stopPropagation();const i=document.getElementById("languages-list");i&&i.classList.toggle("show"),o.classList.toggle("open");return}const n=e.target.closest(".lang-opt");if(n){e.preventDefault();const i=n.getAttribute("data-val");Be(i);return}const a=document.getElementById("account-dropdown"),s=document.getElementById("languages-list"),c=document.getElementById("btn-languages");a&&a.classList.contains("show")&&(e.target.closest("#account-dropdown")||(a.classList.remove("show"),s&&s.classList.remove("show"),c&&c.classList.remove("open")))});function $e(e){const t=document.getElementById("trailer-modal-backdrop");if(!t)return;const o=document.getElementById("trailer-iframe"),n=document.getElementById("trailer-modal-close-btn");o&&(o.src=`https://www.youtube.com/embed/${e}?autoplay=1&rel=0&showinfo=0`),t.classList.remove("is-hidden"),document.body.classList.add("modal-open"),n&&(n.onclick=()=>T()),t.onclick=s=>{s.target===t&&T()};const a=s=>{s.key==="Escape"&&(T(),window.removeEventListener("keydown",a))};window.addEventListener("keydown",a)}function T(){const e=document.getElementById("trailer-modal-backdrop"),t=document.getElementById("trailer-iframe");e&&(e.classList.add("is-hidden"),document.body.classList.remove("modal-open"),t&&(t.src=""))}function z(){const e=document.getElementById("trailer-error-backdrop");if(!e)return;const t=document.getElementById("trailer-error-close-btn");e.classList.remove("is-hidden"),document.body.classList.add("modal-open");const o=()=>{e.classList.add("is-hidden"),document.body.classList.remove("modal-open")};t&&(t.onclick=o),e.onclick=a=>{a.target===e&&o()};const n=a=>{a.key==="Escape"&&(o(),window.removeEventListener("keydown",n))};window.addEventListener("keydown",n)}function Y(e){if(!e||!Array.isArray(e)||e.length===0)return"N/A";const t=e[0];if(typeof t=="object"&&t!==null&&t.name)return e.map(o=>o.name).slice(0,2).join(", ");if(typeof t=="number"){const o={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"},n=e.map(a=>o[a]).filter(Boolean);return n.length>0?n.slice(0,2).join(", "):"Other"}return"N/A"}function K(e){const t=Math.round((e||0)/2);let o="";for(let n=1;n<=5;n++)o+=`<i class="fa-star ${n<=t?"fas active":"far"}"></i>`;return o}function Pe(e){const t=e.genres||e.genre_ids,o=e.release_date?new Date(e.release_date).getFullYear():"N/A";return`
    <div class="movie-card" data-id="${e.id}">
        <img src="${J(e.poster_path)}" alt="${e.title}" class="movie-card-poster" loading="lazy">
        <div class="movie-card-overlay">
            <h3 class="movie-title">${e.title}</h3>
            <div class="movie-meta">
                <span class="movie-genre">${Y(t)} | ${o}</span>
                <div class="movie-rating">${K(e.vote_average)}</div>
            </div>
        </div>
    </div>
  `}async function Ue(e,t,o){if(!(!t||!o))try{const n=await G(e);if(!n)return;const a=V(n.backdrop_path||n.poster_path);t.style.backgroundImage=`
      linear-gradient(to right, 
        #111 0%, 
        rgba(17, 17, 17, 1) 30%, 
        rgba(17, 17, 17, 0.5) 50%, 
        transparent 100%),
      url('${a}')
    `,o.innerHTML=`
      <h1 class="hero-title">${n.title}</h1>
      <div class="star-rating hero-stars">
        ${K(n.vote_average)}
      </div>
      <p class="hero-description">${n.overview||"No description available."}</p>
      <div class="hero-buttons">
        <button class="btn btn-primary" id="hero-watch-trailer" data-id="${n.id}">Watch Trailer</button>
        <button class="btn btn-secondary" id="hero-details-btn" data-id="${n.id}">More details</button>
      </div>
    `;const s=o.querySelector("#hero-watch-trailer");s&&(s.onclick=async i=>{i.preventDefault();const m=i.target.dataset.id;try{const u=(await Ee(m))?.results?.find(l=>l.type==="Trailer"&&l.site==="YouTube");u?$e(u.key):z()}catch(r){console.error(r),z()}});const c=o.querySelector("#hero-details-btn");c&&(c.onclick=i=>{i.preventDefault();const m=i.target.dataset.id;window.openMovieModal&&window.openMovieModal(m)})}catch(n){console.error("Hero update error:",n)}}function Re(e,t){if(!e||!t)return;const o=new Date(e.release_date).toLocaleDateString("en-US"),n=e.vote_average?e.vote_average.toFixed(1):"N.A",a=e.vote_count||0,s=e.popularity?e.popularity.toFixed(1):"N.A",c=Y(e.genres||e.genre_ids),i=V(e.backdrop_path||e.poster_path),u=(JSON.parse(localStorage.getItem("myLibrary"))||[]).includes(Number(e.id))?"Remove from my library":"Add to my library";t.innerHTML=`
    <div class="upcoming-image">
      <img src="${i}" alt="${e.title}" loading="lazy" />
    </div>
    <div class="upcoming-info">
      <h3>${e.title}</h3>
      <div class="movie-details-list">
        <div class="detail-item">
          <span class="detail-key">Release date</span>
          <span class="detail-history">${o}</span>
        </div>
        <div class="detail-item">
          <span class="detail-key">Vote / Votes</span>
          <span class="detail-value">
            <span class="rating-badge">${n}</span> / ${a}
          </span>
        </div>
        <div class="detail-item">
          <span class="detail-key">Popularity</span>
          <span class="detail-value">${s}</span>
        </div>
        <div class="detail-item">
          <span class="detail-key">Genre</span>
          <span class="detail-value">${c}</span>
        </div>
      </div>
      <h4>ABOUT</h4>
      <p class="about-text">${e.overview||"No description available."}</p>
      <button class="btn btn-primary btn-add-library" id="upcoming-add-btn" data-id="${e.id}">
        ${u}
      </button>
    </div>
  `;const l=t.querySelector("#upcoming-add-btn");l&&(l.onclick=()=>{const d=JSON.parse(localStorage.getItem("myLibrary"))||[],v=Number(l.dataset.id),k=d.indexOf(v);k>-1?(d.splice(k,1),l.textContent="Add to my library"):(d.push(v),l.textContent="Remove from my library"),localStorage.setItem("myLibrary",JSON.stringify(d))})}function Oe(){if(document.getElementById("loader"))return;const e=document.createElement("div");e.id="loader",e.style.cssText=`
    position: fixed; inset: 0; background: rgba(0,0,0,0.7);
    display: flex; justify-content: center; align-items: center;
    z-index: 99999; color: white; font-size: 18px; flex-direction: column;
    backdrop-filter: blur(3px);
  `,e.innerHTML=`
    <div class="spinner" style="
      border: 6px solid #333; border-top: 6px solid var(--primary-orange, orange);
      border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin-bottom: 10px;
    "></div><p>Loading...</p>
    <style>@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}</style>
  `,document.body.appendChild(e)}function De(){document.getElementById("loader")?.remove()}export{y as a,Ne as b,qe as c,Re as d,Te as e,G as f,H as g,De as h,Ae as i,Pe as r,Oe as s,Ue as u};
//# sourceMappingURL=loader-BxfnhrZE.js.map
