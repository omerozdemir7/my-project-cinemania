import{f as S,u as I,r as x}from"./ui-helpers-SZr4zYk4.js";const k=async()=>{const l=document.getElementById("library-grid"),u=document.getElementById("library-hero"),h=document.getElementById("library-hero-content"),s=document.getElementById("genre-filter-container"),p=document.getElementById("genre-header"),y=document.getElementById("selected-genre-text"),n=document.getElementById("genre-list"),i=document.getElementById("load-more-container"),v=document.getElementById("load-more-btn");if(!l)return;const L=JSON.parse(localStorage.getItem("myLibrary")||"[]"),m=(Array.isArray(L)?L:[]).map(e=>Number(e)).filter(e=>Number.isFinite(e)&&e>0);if(!m.length){l.innerHTML=`
      <div class="library-message">
        <p style="font-size: 24px; font-weight: 500; margin-bottom: 10px;">OOPS...</p>
        <p>Henüz bir film eklemediniz!</p>
        <a href="/catalog.html" class="btn btn-primary" style="margin-top:20px; display:inline-block;">Kataloğa Git</a>
      </div>`,s&&(s.style.display="none"),i&&i.classList.add("is-hidden");return}const B=await Promise.allSettled(m.map(e=>S(e))),a=[],E=[];B.forEach((e,t)=>{const r=m[t];e.status==="fulfilled"&&e.value&&(a.push(e.value),E.push(r))}),localStorage.setItem("myLibrary",JSON.stringify(E)),a.length>0&&await I(a[0].id,u,h);const b=new Map;if(a.forEach(e=>{e.genres&&e.genres.forEach(t=>b.set(t.id,t.name))}),n){const e=document.createElement("div");e.className="genre-item active",e.textContent="All Genres",e.dataset.id="all",n.appendChild(e),b.forEach((t,r)=>{const c=document.createElement("div");c.className="genre-item",c.textContent=t,c.dataset.id=r,n.appendChild(c)})}p&&p.addEventListener("click",e=>{e.stopPropagation(),n.classList.toggle("is-hidden"),s.classList.toggle("is-open")}),document.addEventListener("click",e=>{s&&!s.contains(e.target)&&(n.classList.add("is-hidden"),s.classList.remove("is-open"))});let g="all",o=[...a];n&&n.addEventListener("click",e=>{if(e.target.classList.contains("genre-item")){g=e.target.dataset.id;const t=e.target.textContent;y&&(y.textContent=t==="All Genres"?"Genre":t),document.querySelectorAll(".genre-item").forEach(r=>r.classList.remove("active")),e.target.classList.add("active"),n.classList.add("is-hidden"),s.classList.remove("is-open"),C()}});let d=0;const M=6;function C(){g==="all"?o=[...a]:o=a.filter(e=>e.genres.some(t=>t.id.toString()===g.toString())),d=0,l.innerHTML="",o.length===0?(l.innerHTML='<div class="library-message">Bu türde film bulunamadı.</div>',i&&i.classList.add("is-hidden")):f()}function f(){const e=o.slice(d,d+M),t=e.map(r=>x(r)).join("");l.insertAdjacentHTML("beforeend",t),d+=e.length,d>=o.length?i&&i.classList.add("is-hidden"):i&&i.classList.remove("is-hidden")}v&&v.addEventListener("click",f),f(),l.addEventListener("click",e=>{const t=e.target.closest(".movie-card");t&&t.dataset.id&&(I(t.dataset.id,u,h),window.scrollTo({top:0,behavior:"smooth"}))})};k();
//# sourceMappingURL=my-library-CmCxw1Yf.js.map
