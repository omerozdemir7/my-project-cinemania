{"version":3,"file":"index-D3k7A2rY.js","sources":["../../src/js/index.js"],"sourcesContent":["// src/js/index.js\r\nimport { showLoader, hideLoader } from './loader.js';\r\nimport { fetchTrendingMovies, fetchUpcomingMovies } from './movies-data.js';\r\nimport {\r\n  renderMovieCard,\r\n  updateHeroWithMovie,\r\n  renderUpcomingSection,\r\n} from './ui-helpers.js';\r\n\r\n// DOM hazır olunca çalış\r\n// (main.js zaten DOMContentLoaded içinde çağırıyor ama \r\n// dinamik import olduğu için burası kendi başına çalışır)\r\nconst initHome = async () => {\r\n  const heroSection = document.getElementById('home-hero');\r\n  const heroContent = heroSection?.querySelector('.hero-content');\r\n  const trendsGrid = document.getElementById('weekly-trends-grid');\r\n  const upcomingContainer = document.getElementById('upcoming-container');\r\n\r\n  if (!heroSection && !trendsGrid) return; // Anasayfada değilsek dur\r\n\r\n  showLoader();\r\n\r\n  try {\r\n    const [dayTrends, weekTrends, upcomingData] = await Promise.all([\r\n      fetchTrendingMovies('day'),\r\n      fetchTrendingMovies('week'),\r\n      fetchUpcomingMovies()\r\n    ]);\r\n\r\n    // --- Hero İşlemleri ---\r\n    let heroMovie = null;\r\n    if (dayTrends?.results?.length) {\r\n      const rand = Math.floor(Math.random() * Math.min(5, dayTrends.results.length));\r\n      heroMovie = dayTrends.results[rand];\r\n    } else if (weekTrends?.results?.length) {\r\n      heroMovie = weekTrends.results[0];\r\n    }\r\n\r\n    if (heroMovie) {\r\n      await updateHeroWithMovie(heroMovie.id, heroSection, heroContent);\r\n    }\r\n\r\n    // --- Weekly Trends ---\r\n    if (weekTrends?.results?.length && trendsGrid) {\r\n      trendsGrid.innerHTML = weekTrends.results\r\n        .slice(0, 3)\r\n        .map(m => renderMovieCard(m))\r\n        .join('');\r\n        \r\n      trendsGrid.addEventListener('click', (e) => {\r\n        const card = e.target.closest('.movie-card');\r\n        if (card && card.dataset.id) {\r\n          // Kart tıklandığında hero'yu güncelle\r\n          updateHeroWithMovie(card.dataset.id, heroSection, heroContent);\r\n          window.scrollTo({ top: 0, behavior: 'smooth' });\r\n        }\r\n      });\r\n    }\r\n\r\n    // --- Upcoming ---\r\n    if (upcomingData?.results?.length && upcomingContainer) {\r\n      const rand = Math.floor(Math.random() * Math.min(10, upcomingData.results.length));\r\n      const movie = upcomingData.results[rand];\r\n      renderUpcomingSection(movie, upcomingContainer);\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(\"Anasayfa yükleme hatası:\", error);\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n};\r\n\r\ninitHome();"],"names":["initHome","heroSection","heroContent","trendsGrid","upcomingContainer","showLoader","dayTrends","weekTrends","upcomingData","fetchTrendingMovies","fetchUpcomingMovies","heroMovie","rand","updateHeroWithMovie","m","renderMovieCard","card","movie","renderUpcomingSection","error","hideLoader"],"mappings":"yHAYA,MAAMA,EAAW,SAAY,CAC3B,MAAMC,EAAc,SAAS,eAAe,WAAW,EACjDC,EAAcD,GAAa,cAAc,eAAe,EACxDE,EAAa,SAAS,eAAe,oBAAoB,EACzDC,EAAoB,SAAS,eAAe,oBAAoB,EAEtE,GAAI,GAACH,GAAe,CAACE,GAErB,CAAAE,IAEA,GAAI,CACF,KAAM,CAACC,EAAWC,EAAYC,CAAY,EAAI,MAAM,QAAQ,IAAI,CAC9DC,EAAoB,KAAK,EACzBA,EAAoB,MAAM,EAC1BC,EAAmB,CACzB,CAAK,EAGD,IAAIC,EAAY,KAChB,GAAIL,GAAW,SAAS,OAAQ,CAC9B,MAAMM,EAAO,KAAK,MAAM,KAAK,OAAM,EAAK,KAAK,IAAI,EAAGN,EAAU,QAAQ,MAAM,CAAC,EAC7EK,EAAYL,EAAU,QAAQM,CAAI,CACpC,MAAWL,GAAY,SAAS,SAC9BI,EAAYJ,EAAW,QAAQ,CAAC,GAyBlC,GAtBII,GACF,MAAME,EAAoBF,EAAU,GAAIV,EAAaC,CAAW,EAI9DK,GAAY,SAAS,QAAUJ,IACjCA,EAAW,UAAYI,EAAW,QAC/B,MAAM,EAAG,CAAC,EACV,IAAIO,GAAKC,EAAgBD,CAAC,CAAC,EAC3B,KAAK,EAAE,EAEVX,EAAW,iBAAiB,QAAU,GAAM,CAC1C,MAAMa,EAAO,EAAE,OAAO,QAAQ,aAAa,EACvCA,GAAQA,EAAK,QAAQ,KAEvBH,EAAoBG,EAAK,QAAQ,GAAIf,EAAaC,CAAW,EAC7D,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAQ,CAAE,EAElD,CAAC,GAICM,GAAc,SAAS,QAAUJ,EAAmB,CACtD,MAAMQ,EAAO,KAAK,MAAM,KAAK,OAAM,EAAK,KAAK,IAAI,GAAIJ,EAAa,QAAQ,MAAM,CAAC,EAC3ES,EAAQT,EAAa,QAAQI,CAAI,EACvCM,EAAsBD,EAAOb,CAAiB,CAChD,CAEF,OAASe,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,QAAC,CACCC,GACF,EACF,EAEApB,EAAQ"}