import{a as B,u as p,s as k,g as H,h as u,f as T,r as w}from"./loader-BxfnhrZE.js";import{onAuthStateChanged as C}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";const x=()=>{const r=document.getElementById("library-grid"),c=document.getElementById("library-hero"),g=document.getElementById("library-hero-content"),i=document.getElementById("genre-filter-container"),y=document.getElementById("genre-header"),m=document.getElementById("genre-list"),f=document.getElementById("selected-genre-text");let d=[],s=document.getElementById("empty-library-msg");if(!s&&r&&(s=document.createElement("div"),s.id="empty-library-msg",s.className="empty-library is-hidden",s.innerHTML=`
      <p>OOPS...</p>
      <p>You haven't added any movies yet.</p>
      <a href="catalog.html" style="color:var(--primary-orange, orange); margin-top:15px; display:inline-block;">Go to Catalog</a>
    `,r.parentNode&&r.parentNode.insertBefore(s,r)),!r)return;async function L(){k(),r.innerHTML="",s&&s.classList.add("is-hidden"),i&&i.classList.add("is-hidden");try{const e=await H();if(!e||e.length===0){u(),s&&s.classList.remove("is-hidden"),c&&(c.style.backgroundImage="none"),g&&(g.innerHTML="<h1>Your Library is Empty</h1>"),i&&(i.style.display="none");return}i&&(i.style.display="block",i.classList.remove("is-hidden"));const n=e.map(o=>T(o));d=(await Promise.all(n)).filter(o=>o!==null),h(d),v(d),d.length>0&&c&&p(d[0].id,c,g)}catch(e){console.error("Kütüphane yüklenirken hata:",e),r.innerHTML='<p style="color:white; text-align:center;">Bir hata oluştu.</p>'}finally{u()}}function h(e){if(!e||e.length===0){r.innerHTML='<p style="color:white; text-align:center; grid-column: 1/-1;">No movies found for this genre.</p>';return}r.innerHTML=e.map(n=>w(n)).join("")}function v(e){if(!m||!y)return;const n=new Map;e.forEach(t=>{t&&t.genres&&Array.isArray(t.genres)&&t.genres.forEach(a=>{a&&a.id&&a.name&&n.set(a.id,a.name)})});let l='<div class="genre-item active" data-id="all">All Genres</div>';n.forEach((t,a)=>{l+=`<div class="genre-item" data-id="${a}">${t}</div>`}),m.innerHTML=l,y.onclick=t=>{t.stopPropagation(),t.preventDefault(),m.classList.toggle("is-hidden"),i.classList.toggle("is-open")};const o=m.querySelectorAll(".genre-item");o.forEach(t=>{t.onclick=a=>{a.stopPropagation(),o.forEach(I=>I.classList.remove("active")),t.classList.add("active");const E=t.dataset.id,b=t.textContent;f&&(f.textContent=b),m.classList.add("is-hidden"),i.classList.remove("is-open"),M(E)}}),document.addEventListener("click",t=>{i&&!i.contains(t.target)&&(m.classList.add("is-hidden"),i.classList.remove("is-open"))})}function M(e){let n=[];e==="all"?n=d:n=d.filter(l=>l.genres&&Array.isArray(l.genres)&&l.genres.some(o=>o.id.toString()===e.toString())),h(n)}C(B,e=>{L()}),r.addEventListener("click",e=>{const n=e.target.closest(".movie-card");n&&n.dataset.id&&c&&(p(n.dataset.id,c,g),window.scrollTo({top:0,behavior:"smooth"}))})};document.addEventListener("DOMContentLoaded",x);
//# sourceMappingURL=my-library-BH8JLuix.js.map
